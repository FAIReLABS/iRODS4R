[
  {
    "objectID": "posts/rirods-0-2-0/index.html",
    "href": "posts/rirods-0-2-0/index.html",
    "title": "Linking R to iRODS’ new HTTP API 🥳",
    "section": "",
    "text": "Note\n\n\n\nThis article is about the release of rirods 0.2.0 (see the documentation). iRODS C++ HTTP 0.2.0 is a requirement for this R package.\n\n\nAs of November 2023 iRODS has released the iRODS C++ HTTP API, as a replacement of the old iRODS C++ REST API. This new interface to the iRODS server comes with a host of improvements including flexibility of management for all types of operations on users, collections and data objects, as well as supporting authentication with OpenID Connect. The HTTP API is steadily maturing, so it was about time to leverage this functionality with rirods.\nBesides a lot of potential for future rirods development in terms of iRODS operations, this new release (rirods 0.2.0) ensures some obvious improvements on the same core functionality as in previous releases of rirods. In this blog we will showcase one of those improvements—the speed of uploading and downloading of files to iRODS. The new HTTP API can now be configured to allow receiving of much larger payloads. An example of how the HTTP API can be configured with a JSON file can be seen here. On top of that, write requests can now be made in parallel, which can as well be configured for the number of allowed threads.\nIn order to benchmark this improvement we show upload and download time as well as memory usage for iget() and iput(), respectively. We use the Docker based iRODS demo as our server. We can easily stand this server up, as follows:\n\nlibrary(rirods)\nuse_irods_demo()\n\n\nDo the following to connect with the iRODS demo server: \ncreate_irods(\"http://localhost:9001/irods-http-api/0.2.0\") \niauth(\"rods\", \"rods\")\n\n\nFor more information on use_irods_demo() see the demo vignette (vignette(\"demo\", package = \"rirods\")) or this page. Now that the demo server is running we can log in to the system by following the instructions as printed above.\n\ncreate_irods(\"http://localhost:9001/irods-http-api/0.2.0\") \niauth(\"rods\", \"rods\")\n\nThis server does obviously not contain any collections or data objects, as can be seen by using ils().\n\nils()\n\nThis collection does not contain any objects or collections.\n\n\nThis demo server has been configured to allow receiving request bodies of up to 8.4 Mb and we can use a maximum of 3 threads simultaneously during a write operation.\nThe files transferred to the irods demo server are created with the GitHub API and the R package gh. The number of repositories and commits for the GitHub Groups; git, irods, nodejs, and tidyverse have been downloaded (7th March 2024). The downloaded results are then saved as csv files. The files generated in this way range in size from 2 Kb to 10 Mb (Figure 1). The script and files can be found here.\n\n\n\n\nFigure 1: Number of repositories and commits on GitHub for the groups git, irods, nodejs, and tidyverse.\n\n\n\nThese files are then transferred to the demo server with iput() and subsequently retrieved with iget(), while comparing rirods 0.1.2 and 0.2.0. This is repeated 100 times and performance was monitored with the R package bench. We can see that the newer version shows a drastic improvement for file transfers in both directions (Figure 2). This was to be expected as the older rirods package version needed to chop up the file before transferring it chunk-by-chunk to the server at relatively small file sizes (Kb range). As this all took place in R, this was necessarily slow.\n\n\n\n\nFigure 2: Median time of file transfer for iget() and iput() based on bench.\n\n\n\nThe same can be said for the memory allocated to up- and download files to iRODS, which improves in the newer version of rirods (Figure 3). We see that above the threshold for file transfers configured server-side imposes a little more strain on the system above 8 Mb, as we also need to chop the file in pieces in these instances.\n\n\n\n\nFigure 3: Memory allocated for file transfer for iget() and iput() based on bench.\n\n\n\nIncreased write and read operations are an obvious improvement when using rirods 0.2.0 and the iRODS HTTP API has a lot of potential to add even more functionality to rirods in the future. Read more about the changes in some of the functions interfaces in the changelog. Contributions to the package are warmly welcomed. Please report issues and make pull requests in the GitHub repository of rirods.\nThe following table list all of the benchmark results.\n\n\n\nBenchmarks results for iget and iput. \n\nsource\nfun name\nfile name\nfile size (Mb)\nmemory allocated (Mb)\nmedian time (sec)\n\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\ngit_repos\n0.00\n0.13\n0.11\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\ntidyverse_repos\n0.01\n1.20\n0.31\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\nirods_repos\n0.05\n5.01\n1.58\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\nnodejs_repos\n0.05\n5.88\n1.67\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\ntidy_commits\n2.88\n307.80\n80.21\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\ngit_commits\n4.92\n526.89\n131.62\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\nirods_commits\n6.52\n695.48\n180.09\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niget\nnodejs_commits\n9.69\n1010.00\n268.12\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\ngit_repos\n0.00\n0.12\n0.16\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\ntidyverse_repos\n0.01\n1.18\n0.45\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\nirods_repos\n0.05\n5.00\n1.96\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\nnodejs_repos\n0.05\n5.87\n2.13\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\ntidy_commits\n2.88\n308.06\n107.14\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\ngit_commits\n4.92\n526.34\n176.25\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\nirods_commits\n6.52\n696.10\n244.76\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.1.2\niput\nnodejs_commits\n9.69\n1010.00\n364.56\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\ngit_repos\n0.00\n1.10\n0.05\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\ntidyverse_repos\n0.01\n1.10\n0.11\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\nirods_repos\n0.05\n1.10\n0.12\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\nnodejs_repos\n0.05\n1.10\n0.11\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\ntidyverse_commits\n2.88\n1.10\n0.17\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\ngit_commits\n4.92\n1.12\n0.24\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\nirods_commits\n6.52\n1.10\n0.29\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niget\nnodejs_commits\n9.69\n1.10\n0.42\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\ngit_repos\n0.00\n2.17\n0.09\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\ntidyverse_repos\n0.01\n2.18\n0.10\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\nirods_repos\n0.05\n2.21\n0.11\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\nnodejs_repos\n0.05\n2.22\n0.09\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\ntidyverse_commits\n2.88\n4.92\n0.16\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\ngit_commits\n4.92\n7.22\n0.17\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\nirods_commits\n6.52\n8.38\n0.23\n\n\nhttps://cran.r-project.org/src/contrib/rirods_0.2.0\niput\nnodejs_commits\n9.69\n752.86\n2.92"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "iRODS4R",
    "section": "",
    "text": "Linking R to iRODS’ new HTTP API 🥳\n\n\nRelease 0.2.0 of rirods\n\n\n\n\nnews\n\n\nR\n\n\nFAIR\n\n\nopen science\n\n\n\n\n\n\n\n\n\n\n\nMarch 18, 2024\n\n\nMartin Schobben, Mariana Montes, Terrell Russell\n\n\n\n\n\n\n  \n\n\n\n\nCare about FAIR\n\n\nFirst release of rirods\n\n\n\n\nnews\n\n\nR\n\n\nFAIR\n\n\nopen science\n\n\n\n\n\n\n\n\n\n\n\nAugust 7, 2023\n\n\nMartin Schobben, Mariana Montes, Terrell Russell\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "One of the biggest problems in research is the inadvertent destruction of data and the inaccessibility of data due to poor labeling and description of data. This loss of data means that studies cannot be replicated, combined or re-used in different settings (Briney 2015; Wilkinson et al. 2016). Data management becomes more important, but also more challenging, in the age of rapid digital data production. The Integrated Rule-Oriented Data System (iRODS) (Rajasekar et al. 2010, 2015) is an open sourced data management software suite that offers a solution to this demand, which encompasses the whole data life cycle from data generation, storage and recycling. The loosely constructed and highly configurable architecture of iRODS frees the user from strict formatting constrains and single-vendor solutions. Furthermore, the open-sourced and community supported nature of iRODS safeguards data storage and re-usability of data in terms of longevity and independently of future technological innovations.\nNonetheless, the learning curve of how to implement iRODS effectively for day-to-day data management purposes can be steep for the average scientist. Hence there have been multiple incentives to lower this barrier by hiding parts of the behind-the-scenes business logic which requires considerable knowledge of command line tools. Highly popular among academics are higher level programming languages, such as R, that can help construct such data analyses workflows. The R package rirods (Schobben and Montes 2024) leverages iRODS in R. This packages allows straightforward integration of data management practices in the R environment, thereby ensuring the findability, accessibility, interoperability, and reusability (FAIR) of data.\n\n\n\nReferences\n\nBriney, Kristin. 2015. Data Management for Researchers: Organize, Maintain and Share Your Data for Research Success. Pelagic Publishing Ltd.\n\n\nRajasekar, Arcot, Reagan Moore, Chien-Yi Hou, Christopher A. Lee, Richard Marciano, Antoine de Torcy, Michael Wan, et al. 2010. “iRODS Primer: Integrated Rule-Oriented Data System.” Synthesis Lectures on Information Concepts, Retrieval, and Services 2 (1): 1–143. https://doi.org/10.2200/s00233ed1v01y200912icr012.\n\n\nRajasekar, Arcot, Terrell Russell, Jason Coposky, Antoine de Torcy, Hao Xu, Michael Wan, Reagan W. Moore, et al. 2015. The integrated Rule-Oriented Data System (iRODS 3.0) Micro-service Workbook.\n\n\nSchobben, Martin, and Mariana Montes. 2024. Rirods: R Client for iRODS. https://github.com/irods/irods_client_library_rirods.\n\n\nWilkinson, Mark D, Michel Dumontier, IJsbrand Jan Aalbersberg, Gabrielle Appleton, Myles Axton, Arie Baak, Niklas Blomberg, et al. 2016. “Comment: The FAIR Guiding Principles for scientific data management and stewardship.” Scientific Data 3: 1–9. https://doi.org/10.1038/sdata.2016.18."
  },
  {
    "objectID": "posts/rirods-0-1-1/index.html",
    "href": "posts/rirods-0-1-1/index.html",
    "title": "Care about FAIR",
    "section": "",
    "text": "This article is about the first release of rirods (see the documentation).\nThe data that drives our R workflow is just as important as the script. Nevertheless, the emphasis lies often on the R script when it comes to reproducibility, but that is not necessarily the most convenient in all circumstances.\nThere are several data management solutions available for R, mostly SQL based solutions, made accessible through the R package DBI. This requires data to be in a tabular format. iRODS can, however, simplify storing data as you are freed from strict formatting requirements (more about iRODS below). We leveraged iRODS’ functionality for R in the new package rirods. This means that you can move around and store any R object as you like.\nImagine you just created an R workflow, where you investigate the number of commits made by contributors for iRODS repositories.\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(ggplot2)\n\ncommits &lt;- read_csv(\"https://raw.githubusercontent.com/FAIReLABS/iRODS4R/main/posts/rirods-0-1-1/data/irods_commits.csv\")\n\ncommits &lt;- commits |&gt; \n  filter(!fork, !archived, !private, !is.na(commits_names)) |&gt; \n  mutate(\n    commits_names = fct_lump(commits_names, 10),\n    commits_names = fct_infreq(commits_names)\n  )\n\nggplot(commits,aes(x = commits_names)) + \n    geom_bar() + \n    coord_flip()\n\n\n\n\nTo reproduce this new data set we could of course rerun the whole script, but imagine that we would have done a similar analysis for a much larger contingent of GitHub repositories. Then it becomes worthwhile to also save these intermediate transformations. We could save this data locally, but a much safer and convenient solution would be to save this in a dedicated data management system.\nHere comes rirods into the picture. Install the package from CRAN or get the development version from GitHub.\n\ninstall.packages(\"rirods\")\n\nThe following package(s) will be installed:\n- rirods [0.1.2]\nThese packages will be installed into \"~/Documents/social/iRODS4R/renv/library/R-4.3/x86_64-pc-linux-gnu\".\n\n# Installing packages --------------------------------------------------------\n- Installing rirods ...                         OK [linked from cache]\nSuccessfully installed 1 package in 3.3 milliseconds.\n\n\nWe will demonstrate rirods usage by running a mock server on your localhost. The username and password are set to \"martin\" and \"secret\" for the example, but can be changed accordingly.\nNote that one needs Bash and Docker (with docker-compose) to use this mock-up.\n\nlibrary(rirods)\nuse_irods_demo(\"martin\", \"secret\")\n\n\nDo the following to connect with the iRODS demo server: \ncreate_irods(\"http://localhost/irods-rest/0.9.3\", \"/tempZone/home\") \niauth(\"martin\", \"secret\")\n\n\nWe follow the instructions from the output and create a project file with the server details and login to the system with our credentials.\n\ncreate_irods(\"http://localhost/irods-rest/0.9.3\", \"/tempZone/home\")\niauth(\"martin\", \"secret\")\n\nNow we can save the R object commits with isaveRDS(), which behaves similar to base R’s saveRDS().\n\nisaveRDS(commits, \"commits.rds\")\n\nThis is not all. You can now also label this data set by adding metadata.\n\nimeta(\"commits.rds\",\n      \"data_object\",\n      operations =\n        list(\n          list(\n            operation = \"add\",\n            attribute = \"content\",\n            value = \"commit history iRODS\"\n          ),\n          list(\n            operation = \"add\",\n            attribute = \"file_type\",\n            value = \"R object\",\n            units = \"RDS\"\n          )\n        ))\n\nNow let’s have a look at how this looks like within the iRODS server with ils(), which is somewhat similar to base R’s list.files().\n\nils(metadata = TRUE)\n\n\n========\nmetadata\n========\n/tempZone/home/martin/commits.rds :\n attribute                value units\n   content commit history iRODS      \n file_type             R object   RDS\n\n\n==========\niRODS Zone\n==========\n                      logical_path        type\n /tempZone/home/martin/commits.rds data_object\n\n\nThis makes the data discoverable on the iRODS server. Hence rirods not only helps you store and find data, but it also makes sharing data with your peers more straightforward.\nAs it seems you were not yet done with your analysis of the iRODS commit history. You put considerable effort in creating an informative plot, which lists commits according to the most popular repositories as well as authors.\n\nplot_commits &lt;- commits |&gt;\n  mutate(names = if_else(stargazers_count &gt; 10, names, \"other\")) |&gt;\n    ggplot(aes(x = commits_names, fill = names)) +\n      geom_bar(position = \"stack\") +\n      coord_flip() +\n      theme(\n        legend.position = \"top\",\n        legend.title = element_blank(),\n        legend.key.size = unit(4, \"point\"),\n        legend.text = element_text(size = 7)\n      )\n\nThis is also no problem for rirods, as long as we deal with an R object, we can store it in iRODS.\n\nisaveRDS(plot_commits, \"plot_commits.rds\")\n\nLater on we can directly get the object back in an R environment, thereby plotting the results.\n\nireadRDS(\"plot_commits.rds\")\n\n\n\n\nLet’s terminate the iRODS demo server and give a short introduction to iRODS.\n\nstop_irods_demo()\n\nThe Integrated Rule-Oriented Data System (iRODS) is an open sourced data management software suite that covers the whole data life cycle from data generation, storage and recycling. The loosely constructed and highly configurable architecture of iRODS frees the user from strict formatting constrains and single-vendor solutions. Furthermore, the open-sourced and community supported nature of iRODS safeguards data storage and re-usability of data in terms of longevity and independently of future technological innovations.\nYou can watch the videos to get a better understanding of what iRODS brings to data management.\n\n\n\n\n\nAutomated Data Management: An Introduction to iRODS\n\n\n\n\n\niRODS: open source data management software\n\n\n\n\nOr visit the iRODS website: https://irods.org/.\nThe code to generate iRODS GitHub commit history can be found here, and is based on this blog by Maëlle Salmon."
  }
]